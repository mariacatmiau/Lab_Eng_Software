<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard ONG | DoaDoa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="js/dashboard-ong.js" defer></script>
    <style>
        .sidebar { width: 280px; }
        .main-content { margin-left: 280px; }
    </style>
</head>
<body class="bg-gray-100">

<script>
    document.addEventListener("DOMContentLoaded", () => {
      const usuario = JSON.parse(localStorage.getItem("usuario"));
      console.log("Usuário carregado:", usuario);

      if (!usuario || !usuario.tipo) {
        console.warn("Sessão expirada. Redirecionando...");
        localStorage.removeItem("usuario");
        setTimeout(() => window.location.replace("login.html"), 0);
        return;
      }

      const spanNome = document.querySelector("#nomeUsuario");
      if (spanNome && usuario.nome) spanNome.textContent = usuario.nome;

      const logout = document.getElementById("logout");
      if (logout) {
        logout.addEventListener("click", (e) => {
          e.preventDefault();
          localStorage.removeItem("usuario");
          window.location.replace("login.html");
        });
      }

      window.history.replaceState({}, document.title, window.location.href);
      AOS.init();
      feather.replace();
    });
</script>

<div class="sidebar fixed inset-y-0 left-0 bg-white shadow-lg">
    <div class="flex items-center justify-center h-16 px-4 bg-green-600">
        <i data-feather="heart" class="text-white h-6 w-6"></i>
        <span class="ml-2 text-white font-bold">DoaDoa</span>
    </div>
    <nav class="mt-8 px-4 space-y-1">
        <a href="dashboard-ong.html" class="bg-green-100 text-green-700 flex items-center px-3 py-2 text-sm font-medium rounded-md">
            <i data-feather="home" class="text-green-500 mr-3 h-5 w-5"></i> Dashboard
        </a>
        <a href="doacoes-ong.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900">
            <i data-feather="gift" class="mr-3 h-5 w-5 text-gray-400"></i> Doações
        </a>
        <a href="retiradas-ong.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900">
            <i data-feather="truck" class="mr-3 h-5 w-5 text-gray-400"></i> Retiradas
        </a>
    </nav>
    <div class="absolute bottom-0 w-full px-4 py-4 border-t border-gray-200">
        <a id="logout" href="#" class="flex items-center text-sm text-gray-600 hover:text-gray-900">
            <i data-feather="log-out" class="mr-3 h-5 w-5 text-gray-400"></i> Sair
        </a>
    </div>
</div>

<div class="main-content">
    <header class="bg-white shadow">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <h1 class="text-2xl font-bold text-gray-900">Dashboard - ONG</h1>
        </div>
    </header>


    <main class="max-w-7xl mx-auto px-6 py-6">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-white shadow rounded-lg p-6 flex items-center">
                <i data-feather="clock" class="h-10 w-10 text-yellow-500"></i>
                <div class="ml-4">
                    <p class="text-sm text-gray-500">Doações Pendentes</p>
                    <p id="doacoes-pendentes" class="text-2xl font-bold text-gray-900">--</p>
                </div>
            </div>
            <div class="bg-white shadow rounded-lg p-6 flex items-center">
                <i data-feather="check" class="h-10 w-10 text-green-600"></i>
                <div class="ml-4">
                    <p class="text-sm text-gray-500">Doações Aceitas</p>
                    <p id="doacoes-aceitas" class="text-2xl font-bold text-gray-900">--</p>
                </div>
            </div>
            <div class="bg-white shadow rounded-lg p-6 flex items-center">
                <i data-feather="truck" class="h-10 w-10 text-blue-600"></i>
                <div class="ml-4">
                    <p class="text-sm text-gray-500">Retiradas Concluídas</p>
                    <p id="retiradas-concluidas" class="text-2xl font-bold text-gray-900">--</p>
                </div>
            </div>
            <div class="bg-white shadow rounded-lg p-6 flex items-center">
                <i data-feather="package" class="h-10 w-10 text-purple-600"></i>
                <div class="ml-4">
                    <p class="text-sm text-gray-500">Produtos Disponíveis</p>
                    <p id="produtos-disponiveis" class="text-2xl font-bold text-gray-900">--</p>
                </div>
            </div>
        </div>

        <div class="bg-white shadow rounded-lg overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-200">
                <h3 class="text-lg font-medium text-gray-900">Doações Recentes</h3>
            </div>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Produto</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Supermercado</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                    </tr>
                    </thead>
                    <tbody id="tabela-doacoes" class="bg-white divide-y divide-gray-200">
                    <tr><td colspan="3" class="text-center py-4 text-gray-500">Carregando...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>
</div>

</body>
</html>
